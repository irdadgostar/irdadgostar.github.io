 <!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ====================
       PROFESSIONAL SEO & GOOGLE TITLING
       ==================== -->
    <title>آرشیو رسمی آثار | امیرحسین دادگستر (پژوهش‌ها و مقالات)</title>
    <meta name="description" content="وب‌سایت رسمی امیرحسین دادگستر، آرشیو کاملی از پژوهش‌ها، مقالات و یادداشت‌ها در حوزه‌های علوم اسلامی، قرآن‌شناسی و تربیت. دسترسی به تمام آثار.">
    
    <!-- Other meta tags remain the same as they were already good -->
    <meta name="keywords" content="امیرحسین دادگستر, Amirhossein Dadgostar, Amir Dadgostar, أمير حسين دادگستر, پژوهشگر اسلامی, علوم اسلامی, مقالات اسلامی, قرآن‌شناسی">
    <meta name="author" content="امیرحسین دادگستر">
    <link rel="canonical" href="https://irdadgostar.github.io/">
    <link rel="alternate" hreflang="fa" href="https://irdadgostar.github.io/">
    <link rel="alternate" hreflang="x-default" href="https://irdadgostar.github.io/">
    <meta property="og:title" content="آرشیو رسمی آثار | امیرحسین دادگستر">
    <meta property="og:description" content="مجموعه کامل پژوهش‌ها، مقالات و یادداشت‌های امیرحسین دادگostar.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://irdadgostar.github.io/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="آرشیو رسمی آثار | امیرحسین دادگستر">
    <meta name="twitter:description" content="مجموعه کامل پژوهش‌ها، مقالات و یادداشت‌های امیرحسین دادگostar.">

    <!-- Structured Data (Schema.org) - Already excellent -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Person", "name": "امیرحسین دادگستر", "url": "https://irdadgostar.github.io/", "jobTitle": "پژوهشگر و مؤلف",
          "description": "پژوهشگر در حوزه‌های علوم اسلامی، قرآن‌شناسی، فقه و حقوق.",
          "alternateName": ["Amirhossein Dadgostar", "Amir Dadgostar"]
        },
        {
          "@type": "WebSite", "url": "https://irdadgostar.github.io/", "name": "امیرحسین دادگستر | پژوهش‌ها و آثار",
          "author": { "@type": "Person", "name": "امیرحسین دادگستر" },
          "publisher": { "@type": "Person", "name": "امیرحسین دادگستر" }
        }
      ]
    }
    </script>

    <!-- Preload Fonts for Performance -->
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

    <style>
        :root {
            --bg-color: #f8f9fa;
            --surface-color: #ffffff;
            --header-bg: #1a202c; 
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-inverted: #edf2f7;
            --border-color: #e2e8f0;
            --shadow-color: rgba(0, 0, 0, 0.06);
            --font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            --border-radius: 12px;
            --transition-speed: 0.3s;
        }

        @font-face { font-family: 'Vazirmatn'; src: url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-Regular.woff2') format('woff2'); font-weight: 400; font-display: swap; }
        @font-face { font-family: 'Vazirmatn'; src: url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-Bold.woff2') format('woff2'); font-weight: 700; font-display: swap; }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.7;
            font-size: 16px;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1.5rem; }

        /* Icon Style */
        .icon {
            width: 1.2em;
            height: 1.2em;
            stroke-width: 2;
        }

        /* HEADER & NAVIGATION */
        .header {
            position: sticky; top: 0; width: 100%;
            background-color: var(--header-bg);
            z-index: 1000;
            padding: 1.25rem 0;
            border-bottom: 1px solid #2d3748;
        }
        .nav-container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: 700; color: var(--text-inverted); text-decoration: none; }
        .nav-right { display: flex; align-items: center; gap: 1.5rem; }
        .nav-menu { display: none; list-style: none; gap: 2rem; } /* Hidden on all for simplicity, can be re-enabled for desktop */
        .nav-link { color: #a0aec0; text-decoration: none; font-weight: 500; transition: color var(--transition-speed) ease; }
        .nav-link:hover { color: var(--text-inverted); }
        
        .archive-button {
            display: inline-flex; align-items: center; gap: 0.5rem;
            background-color: var(--primary-color);
            color: #fff;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all var(--transition-speed) ease;
        }
        .archive-button:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
        }

        /* HERO SECTION */
        .hero-section {
            background: linear-gradient(170deg, #ffffff 0%, #f8f9fa 100%);
            text-align: center;
            padding: 5rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .hero-section h1 { font-size: 3rem; font-weight: 700; margin-bottom: 1rem; }
        .hero-section p { font-size: 1.25rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto 2.5rem auto; }

        .search-wrapper { position: relative; max-width: 600px; margin: 0 auto; }
        .search-wrapper .icon {
            position: absolute; right: 20px; top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            pointer-events: none;
        }
        #search-input {
            width: 100%;
            padding: 1rem 2.5rem 1rem 1.5rem; /* More padding on the right for icon */
            font-family: var(--font-family);
            font-size: 1.1rem;
            border: 1px solid var(--border-color);
            border-radius: 50px;
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
            -webkit-appearance: none;
        }
        #search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.15);
        }
        #search-input::placeholder { color: #9ca3af; }

        /* PUBLICATIONS GRID */
        .page-section { padding: 5rem 0; }
        .publication-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2.5rem;
        }
        .publication-item {
            display: flex; flex-direction: column;
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px -1px var(--shadow-color), 0 2px 4px -2px var(--shadow-color);
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out, border-color 0.2s ease-out;
            cursor: pointer;
            overflow: hidden;
        }
        .publication-item:hover {
            transform: translateY(-8px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.1), 0 4px 6px -4px rgba(37, 99, 235, 0.1);
        }
        /* Card image parts remain the same */
        .item-image-wrapper { width: 100%; aspect-ratio: 16 / 9; position: relative; background-color: #f0f3f7; }
        .image-shimmer { position: absolute; inset: 0; background: linear-gradient(100deg, rgba(255,255,255,0) 20%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0) 80%), #f0f3f7; background-size: 200% 100%; animation: shimmer 1.5s infinite linear; }
        @keyframes shimmer { from { background-position: 200% 0; } to { background-position: -200% 0; } }
        .item-image { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.5s ease; }
        .item-image.loaded { opacity: 1; }
        .item-content { padding: 1.5rem; display: flex; flex-direction: column; flex-grow: 1; }
        .item-title-wrapper { flex-grow: 1; margin-bottom: 1rem; }
        .item-title { font-size: 1.25rem; font-weight: 700; line-height: 1.5; color: var(--text-primary); }
        .item-date { font-size: 0.9rem; color: var(--text-secondary); }
        #no-results { display: none; text-align: center; padding: 2rem; font-size: 1.1rem; color: var(--text-secondary); }
        
        /* MODAL */
        /* Modal styles are mostly fine, just minor tweaks */
        #modal-container { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background-color: rgba(17, 24, 39, 0.6); backdrop-filter: blur(5px); z-index: 10000; opacity: 0; transition: opacity var(--transition-speed) ease-in-out; }
        #modal-container.visible { opacity: 1; }
        #modal-content { background-color: var(--surface-color); width: 90%; max-width: 700px; max-height: 90vh; display: flex; flex-direction: column; border-radius: var(--border-radius); box-shadow: 0 5px 20px rgba(0,0,0,0.1); transform: scale(0.95); transition: transform var(--transition-speed) ease-in-out; }
        #modal-container.visible #modal-content { transform: scale(1); }
        #modal-header, #modal-body, #modal-footer { padding: 1.5rem; }
        #modal-header { border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
        #modal-title { font-size: 1.4rem; font-weight: 700; }
        #modal-close { background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--text-secondary); line-height: 1; }
        #modal-body { overflow-y: auto; }
        #modal-description-wrapper { background-color: #f8f9fa; border: 1px solid var(--border-color); padding: 1.25rem; border-radius: 8px; font-size: 1rem; }
        #modal-description-wrapper pre { margin: 0; white-space: pre-wrap; word-wrap: break-word; font-family: var(--font-family); }
        #modal-footer { border-top: 1px solid var(--border-color); text-align: left; }
        .view-button {
            display: inline-flex; align-items: center; gap: 0.5rem;
            padding: 0.7rem 1.4rem;
            background-color: var(--primary-color);
            color: #fff; text-decoration: none; border-radius: 8px; font-weight: 600;
            transition: background-color var(--transition-speed);
        }
        .view-button:hover { background-color: var(--primary-hover); }

        /* FOOTER */
        .footer { padding: 4rem 0; background-color: #eef2ff; border-top: 1px solid var(--border-color); }
        .footer-grid { display: grid; grid-template-columns: 2fr 1.5fr; gap: 4rem; }
        .footer-col h3 { margin-bottom: 1.5rem; font-size: 1.3rem; }
        .footer-col p { color: var(--text-secondary); }
        .footer-col a { color: var(--text-secondary); text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; transition: color var(--transition-speed); }
        .footer-col a:hover { color: var(--primary-color); }
        .footer-bottom { text-align: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #dbeafe; color: var(--text-secondary); font-size: 0.9rem; }
        
        /* RESPONSIVENESS */
        @media (max-width: 768px) {
            .hero-section h1 { font-size: 2.5rem; }
            .footer-grid { grid-template-columns: 1fr; gap: 2.5rem; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container nav-container">
            <a href="#" class="logo">امیرحسین دادگستر</a>
            <a href="https://drive.google.com/drive/folders/1mAAdly-AM4pP9YZwIrz_uyKwujTZABHc" target="_blank" rel="noopener noreferrer" class="archive-button">
                <span>آرشیو کامل</span>
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" /></svg>
            </a>
        </div>
    </header>

    <main>
        <section class="hero-section">
            <div class="container">
                <h1>آرشیو پژوهش‌ها و آثار</h1>
                <p>مجموعه‌ای از یادداشت‌ها، مقالات و پژوهش‌ها در حوزه‌های مختلف</p>
                <div class="search-wrapper">
                    <input type="text" id="search-input" placeholder="جستجو در میان آثار...">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                </div>
            </div>
        </section>

        <section id="publications" class="page-section">
            <div class="container">
                <div id="publication-container" class="publication-grid">
                    <!-- Skeletons & Content will be injected here by JS -->
                </div>
                <p id="no-results">هیچ اثری با این مشخصات یافت نشد.</p>
            </div>
        </section>
    </main>

    <footer id="footer" class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>درباره من</h3>
                    <p>من امیرحسین دادگستر هستم، علاقه‌مند به پژوهش در زمینه‌های مختلف. این وب‌سایت آرشیوی از یادداشت‌ها و آثار من است.</p>
                </div>
                <div class="footer-col">
                    <h3>تماس</h3>
                    <a href="mailto:irdadgostar@gmail.com">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                        <span>irdadgostar@gmail.com</span>
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 - کلیه حقوق این آثار برای امیرحسین دادگستر محفوظ است.</p>
            </div>
        </div>
    </footer>

    <!-- Modal HTML -->
    <div id="modal-container">
        <div id="modal-content">
            <header id="modal-header">
                <h2 id="modal-title"></h2>
                <button id="modal-close" aria-label="بستن">&times;</button>
            </header>
            <div id="modal-body">
                <div class="item-image-wrapper" id="modal-image-container" style="display: none; margin-bottom: 1.5rem; border-radius: 8px; overflow:hidden;">
                    <div class="image-shimmer"></div>
                    <img id="modal-image" class="item-image" src="" alt="تصویر اثر">
                </div>
                <div id="modal-description-wrapper">
                    <pre id="modal-code-content"></pre>
                </div>
            </div>
            <footer id="modal-footer">
                <a href="#" id="modal-link" class="view-button" target="_blank" rel="noopener noreferrer">
                    <span>مشاهده و دانلود</span>
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
                </a>
            </footer>
        </div>
    </div>

    <script defer>
        // JavaScript functionality remains exactly the same. No changes needed.
        document.addEventListener('DOMContentLoaded', () => {
            const SPREADSHEET_ID = '1A1_02ooUIz7c_9deCuUzHXUknM2VpTGY0-W4vMI4kxs';
            const API_URL = `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/gviz/tq?tqx=out:json`;

            const publicationContainer = document.getElementById('publication-container');
            const searchInput = document.getElementById('search-input');
            const noResultsMsg = document.getElementById('no-results');
            
            let allPublications = [];

            function displaySkeletons(count = 6) {
                const skeletonsHTML = Array(count).fill('').map(() => `
                    <div class="publication-item">
                        <div class="item-image-wrapper"><div class="image-shimmer"></div></div>
                        <div class="item-content">
                            <div class="item-title-wrapper">
                                <div style="height: 1.2em; width: 80%; margin-bottom: 0.5em; background-color: #e9ecef; border-radius: 4px;"></div>
                                <div style="height: 1.2em; width: 60%; background-color: #e9ecef; border-radius: 4px;"></div>
                            </div>
                            <div style="height: 0.9em; width: 40%; background-color: #e9ecef; border-radius: 4px; margin-top: 1rem;"></div>
                        </div>
                    </div>
                `).join('');
                publicationContainer.innerHTML = skeletonsHTML;
            }

            function loadImage(imgElement, imageUrl) {
                const shimmer = imgElement.previousElementSibling;
                const tempImg = new Image();
                tempImg.src = imageUrl;
                tempImg.onload = () => {
                    imgElement.src = imageUrl;
                    imgElement.classList.add('loaded');
                    if (shimmer) shimmer.style.display = 'none';
                };
                tempImg.onerror = () => {
                    if (imgElement.parentElement) {
                        imgElement.parentElement.style.display = 'none';
                    }
                };
            }

            async function fetchPublications() {
                try {
                    const response = await fetch(API_URL);
                    if (!response.ok) throw new Error('Network response was not ok');
                    const text = await response.text();
                    const jsonText = text.match(/google\.visualization\.Query\.setResponse\((.*)\)/s)[1];
                    const data = JSON.parse(jsonText);
                    return data.table.rows.map(row => ({
                        date: row.c[0]?.f || row.c[0]?.v || 'بدون تاریخ',
                        title: row.c[1]?.v || 'بدون عنوان',
                        description: row.c[2]?.v || '',
                        link: row.c[3]?.v || '#',
                        image: row.c[4]?.v || null
                    }));
                } catch (error) {
                    console.error("Fetch Error:", error);
                    publicationContainer.innerHTML = '<p style="text-align:center; color: var(--text-secondary);">خطا در بارگذاری اطلاعات. لطفاً اتصال اینترنت خود را بررسی کرده و صفحه را مجدداً بارگذاری نمایید.</p>';
                    return [];
                }
            }

            function renderPublications(publications) {
                if (!publications || publications.length === 0) {
                    noResultsMsg.style.display = 'block';
                    publicationContainer.innerHTML = '';
                    return;
                }
                noResultsMsg.style.display = 'none';
                publicationContainer.innerHTML = publications.map(pub => `
                    <article class="publication-item" tabindex="0" data-publication='${escapeHTML(JSON.stringify(pub))}'>
                        ${pub.image ? `
                        <div class="item-image-wrapper">
                            <div class="image-shimmer"></div>
                            <img class="item-image" alt="${escapeHTML(pub.title)}">
                        </div>` : ''}
                        <div class="item-content">
                            <div class="item-title-wrapper">
                                <h3 class="item-title">${escapeHTML(pub.title)}</h3>
                            </div>
                            <p class="item-date">${escapeHTML(pub.date)}</p>
                        </div>
                    </article>
                `).join('');

                const itemsToObserve = publicationContainer.querySelectorAll('.publication-item');
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const item = entry.target;
                            const pubData = JSON.parse(item.dataset.publication);
                            const imgElement = item.querySelector('.item-image');
                            if (imgElement && !imgElement.src && pubData.image) {
                                loadImage(imgElement, pubData.image);
                            }
                            observer.unobserve(item);
                        }
                    });
                }, { rootMargin: '0px 0px 200px 0px' });
                itemsToObserve.forEach(item => imageObserver.observe(item));
            }

            const modal = {
                container: document.getElementById('modal-container'),
                title: document.getElementById('modal-title'),
                closeBtn: document.getElementById('modal-close'),
                imageContainer: document.getElementById('modal-image-container'),
                image: document.getElementById('modal-image'),
                descriptionWrapper: document.getElementById('modal-description-wrapper'),
                codeContent: document.getElementById('modal-code-content'),
                link: document.getElementById('modal-link'),

                open(pubData) {
                    this.title.textContent = pubData.title;
                    this.link.href = pubData.link;

                    if (pubData.description) {
                        this.descriptionWrapper.style.display = 'block';
                        this.codeContent.textContent = pubData.description;
                    } else {
                        this.descriptionWrapper.style.display = 'none';
                    }

                    if (pubData.image) {
                        this.imageContainer.style.display = 'block';
                        this.image.className = 'item-image';
                        this.image.src = '';
                        this.image.alt = pubData.title;
                        loadImage(this.image, pubData.image);
                    } else {
                        this.imageContainer.style.display = 'none';
                    }

                    this.container.style.display = 'flex';
                    setTimeout(() => this.container.classList.add('visible'), 10);
                },
                close() {
                    this.container.classList.remove('visible');
                    setTimeout(() => this.container.style.display = 'none', 300);
                },
                init() {
                    this.closeBtn.addEventListener('click', () => this.close());
                    this.container.addEventListener('click', e => {
                        if (e.target === this.container) this.close();
                    });
                    document.addEventListener('keydown', e => {
                        if (e.key === 'Escape' && this.container.classList.contains('visible')) this.close();
                    });
                }
            };
            modal.init();

            searchInput.addEventListener('input', () => {
                const searchTerm = searchInput.value.toLowerCase().trim();
                const filtered = allPublications.filter(p => 
                    p.title.toLowerCase().includes(searchTerm) ||
                    p.description.toLowerCase().includes(searchTerm)
                );
                renderPublications(filtered);
            });

            publicationContainer.addEventListener('click', e => {
                const item = e.target.closest('.publication-item');
                if (item) modal.open(JSON.parse(item.dataset.publication));
            });
            publicationContainer.addEventListener('keydown', e => {
                const item = e.target.closest('.publication-item');
                if (e.key === 'Enter' && item) {
                     e.preventDefault();
                     modal.open(JSON.parse(item.dataset.publication));
                }
            });
            
            function escapeHTML(str) {
                return str.replace(/'/g, '&#039;').replace(/"/g, '&quot;');
            }

            async function main() {
                displaySkeletons();
                allPublications = await fetchPublications();
                renderPublications(allPublications);
            }

            main();
        });
    </script>
</body>
</html>
